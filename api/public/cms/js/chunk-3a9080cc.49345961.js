(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a9080cc"],{"0182":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("div",{staticClass:"top-title"},[t._v("订单管理")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.act},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{attrs:{index:"1"},on:{click:t.jump_to_a}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("订单列表")])]),a("el-menu-item",{attrs:{index:"2"},on:{click:t.jump_to_b}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("评价")])]),a("el-menu-item",{attrs:{index:"4"},on:{click:t.jump_to_tk}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("退款")])])],1)],1)},n=[],r={data:function(){return{act:""}},props:{ac:String},mounted:function(){this.act=this.ac},methods:{jump_to_order_count:function(){this.$router.push({path:"/order/order_count"})},jump_to_a:function(){this.$router.push({path:"/order/order_list"})},jump_to_tk:function(){this.$router.push({path:"/order/tk"})},jump_to_b:function(){this.$router.push({path:"/order/evaluate"})},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},handleselect:function(t,e){this.act=t,localStorage.setItem("act",t)}}},i=r,o=a("5d22"),l=Object(o["a"])(i,s,n,!1,null,null,null);e["a"]=l.exports},"12e2":function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wgARCAA9ADwDASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAAAQUAAgMEBv/EABgBAAMBAQAAAAAAAAAAAAAAAAABAgME/9oADAMBAAIQAxAAAAH1NrWvjBIKkBcwmIvlsnnqaBSCWs82wctNk7Yi/F31Wy7NkHko2YAni786uOmCp0CCLA5aZuBUhx//xAAhEAACAwEAAgEFAAAAAAAAAAABAgADERIQFAQTICIyQP/aAAgBAQABBQLp5rTWnRnRnRnRmmZM8ZMmTJnj6lc0aCDO1jWIkW2tzG/Ub7HyidqH5DNuI5oJNsbeRXYkel2qrqZT6zKxqfK67Effu3+A+f/EABoRAAIDAQEAAAAAAAAAAAAAAAABAhIhEBH/2gAIAQMBAT8BqzTTTwaKkhsci45kuS5//8QAFhEAAwAAAAAAAAAAAAAAAAAAESAw/9oACAECAQE/AWMv/8QAJxAAAQMCBQIHAAAAAAAAAAAAAQACESExEBIiMkFRkQMTIzBAQnH/2gAIAQEABj8C3Fbj3W4q5VyrlXKufa3t7oDqqIahVanASoa4E4GBKd6DbWlVIGjanGANJ+sSjSvQpmScvlnhNmeeZwMCSg4Q51c1VEicsWRkAUPKkQ+914ccMg1hDNEfvyv/xAAkEAACAgEDBAIDAAAAAAAAAAABEQAhMRBR8SBBcZFhwYHR4f/aAAgBAQABPyGz7YJof0Jy05actOWnPaRK6hoAOcXiGLsIHJLBIMSe4IXEOyGZ8JoBjjCwLG8cC8CKv1AhW7l+Pa9THAEEfYjk5yhBLufMKZAgVZVGoPsaBjBhhASooPMQ4tmTKx6l0d7uJ8y+IEw2TE1kGxUJEA3KhrbxDmRC92fxqcJ6BMcccd6GOOPqDX//2gAMAwEAAgADAAAAEA+vd5KuZxmfRoPjbP/EABkRAQEBAQEBAAAAAAAAAAAAAAEAESExQf/aAAgBAwEBPxA09kByblRDmyBuHlhL5K+zLcy9tZs7f//EABgRAQEBAQEAAAAAAAAAAAAAAAABESEQ/9oACAECAQE/ENjjjjW+IxjEiTyI/8QAJRABAAICAQIGAwEAAAAAAAAAAQARIUExUWEQcYGRofGxweHw/9oACAEBAAE/EFsPczYb1RvPu5Sfsz7RPtE+0Q/qJw7yotgtRVy0GwRBRYVAZV1L/wDR8xrXSiZsOX5IalLkVSNMTCzgLZpfTBOOyvcO0vBxeQ1GEwN6m0dlwBk4szKr3ZPiACa1Ahv3Do04IAA4twLduHtBRFLFFXyYpiu5AEcKrS4vQxldR8Yb0BVgLnq+c5QMwpelul6lwFWIruU4KHlLYAGA1856uV012EoJZwY6RFJ8BCa7O71BG3Mcg4cvwlxB4jQg6jp3iLlxjV4OCYEVbjfXgRG0CRKYjRjeLHiajN+JDcC44Z//2Q=="},"396f":function(t,e,a){},"8d37":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("el-container",[s("el-aside",{staticClass:"not-print bg-white erbian",attrs:{width:"160px"}},[s("NavTo",{attrs:{ac:"1"}})],1),s("transition",{attrs:{appear:"","appear-active-class":"animated fadeInLeft"}},[s("el-main",{staticStyle:{"background-color":"#FFFFFF"}},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),s("el-breadcrumb-item",[t._v("订单列表")])],1),s("div",{staticClass:"H10"}),s("div",{staticClass:"search"},[s("el-col",{staticClass:"col",attrs:{span:4}},[s("span",[t._v("支付状态")]),s("el-select",{attrs:{placeholder:"支付状态"},model:{value:t.form.playstate,callback:function(e){t.$set(t.form,"playstate",e)},expression:"form.playstate"}},[s("el-option",{attrs:{label:"全部",value:"-1"}}),s("el-option",{attrs:{label:"已支付",value:"1"}}),s("el-option",{attrs:{label:"待支付",value:"0"}})],1)],1),s("el-col",{staticClass:"col col_center",attrs:{span:6}},[s("span",[t._v("日期范围")]),s("el-col",{attrs:{span:11}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:t.form.starttime,callback:function(e){t.$set(t.form,"starttime",e)},expression:"form.starttime"}})],1),s("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),s("el-col",{attrs:{span:11}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.form.endtime,callback:function(e){t.$set(t.form,"endtime",e)},expression:"form.endtime"}})],1)],1),s("el-col",{staticClass:"col",attrs:{span:4}},[s("span",[t._v("关键词")]),s("el-input",{attrs:{placeholder:"输入 订单号 或 手机号"},model:{value:t.form.wordkey,callback:function(e){t.$set(t.form,"wordkey",e)},expression:"form.wordkey"}})],1),s("el-col",{staticClass:"col",attrs:{span:1}},[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("搜索")])],1)],1),s("div",{staticClass:"H10"}),s("div",{staticClass:"order"},t._l(t.show_list,(function(e,n){return s("div",{key:n},[s("div",{staticClass:"order-01"},[s("div",[s("el-row",{staticStyle:{"line-height":"32px"}},[s("el-col",{attrs:{span:4}},[s("div",[s("span",{staticClass:"cu"},[t._v("订单号：")]),t._v(t._s(e.order_num))])]),s("el-col",{attrs:{span:2}},[s("div",[s("span",{staticClass:"cu"},[t._v("折扣： ")]),t._v("-"+t._s(1*e.reduction_money+1*e.coupon_money))])]),s("el-col",{attrs:{span:3}},[s("div",[s("span",{staticClass:"cu"},[t._v("应付金额：")]),t._v(t._s(e.order_money))])]),"配送"==e.drive_type?s("el-col",{attrs:{span:4}},[s("div",[s("span",{staticClass:"cu"},[t._v("地址：")]),t._v(t._s(e.receiver_city+e.receiver_address))])]):t._e(),"店内就餐"==e.drive_type?s("el-col",{attrs:{span:4}},[s("div",[s("span",{staticClass:"cu"},[t._v("桌号：")]),t._v(t._s(e.table_num)+"号桌")])]):t._e(),s("el-col",{attrs:{span:5}},[s("div",[s("span",{staticClass:"cu"},[t._v("日期：")]),t._v(t._s(e.created_at))])])],1),s("el-row",{staticStyle:{"margin-top":"10px","line-height":"42px"}},[s("el-col",{attrs:{span:2}},[s("div",[1==e.payment_state?s("el-button",{attrs:{size:"mini",type:"info",disabled:!0}},[t._v("已支付")]):s("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.zf(e.order_id)}}},[t._v("待支付")])],1)]),s("el-col",{attrs:{span:2}},[1==e.payment_state?s("div",[0==e.shipment_state?s("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.send(e.order_id)}}},[t._v("配送")]):1==e.shipment_state?s("el-button",{attrs:{size:"mini",type:"info",disabled:!0}},[t._v("已配送")]):s("el-button",{attrs:{size:"mini",type:"info",disabled:!0}},[t._v("已完成")])],1):t._e()]),s("el-col",{attrs:{span:2}},[s("div",[0==e.state&&1==e.shipment_state?s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"info",size:"mini"},on:{click:function(a){return t.qrysd(e.order_id)}},slot:"reference"},[t._v("确认已送达")]):t._e(),1==e.state?s("el-button",{attrs:{size:"mini",type:"info",disabled:!0}},[t._v("已收到")]):t._e()],1)]),s("el-col",{attrs:{span:2}},[s("div",[1==e.payment_state?s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"info",size:"mini"},on:{click:function(a){return t.print_tik(e.order_num)}},slot:"reference"},[t._v("打印小票")]):t._e()],1)]),s("el-col",{attrs:{span:1}},[s("div",[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"mini"},on:{click:function(a){return t.del(e.order_id)}},slot:"reference"},[t._v("删除")])],1)])],1)],1),s("div",{staticClass:"order-01-2"},t._l(e.ordergoods,(function(e,n){return s("div",{key:n,staticClass:"order-01-2-01"},[e.pic?s("img",{staticStyle:{width:"6.5rem",height:"6.5rem"},attrs:{src:t.geting+e.pic}}):s("img",{attrs:{src:a("12e2")}}),s("div",{staticClass:"order-01-2-01-name"},[t._v(t._s(e.goods_name)+" x"+t._s(e.number))])])})),0)]),s("div",{staticClass:"BH10"})])})),0),s("el-pagination",{staticStyle:{"padding-top":"60px","text-align":"center"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})],1)],1)],1)],1)},n=[],r=(a("2763"),a("a49b"),a("f9ff")),i=a("981f");function o(t){var e="order/admin/get_order";return i["a"].post(e,t).then((function(t){return t}))}var l={searchOrder:o},c=a("0182"),A=a("71c2"),u={data:function(){return{size:8,total:0,list:[],all:[],geting:this.$getimg,show_list:[],test:"",form:{playstate:"",starttime:"",endtime:"",wordkey:""}}},components:{Header:A["a"],NavTo:c["a"]},mounted:function(){this.get_all_order()},methods:{print_tik:function(t){var e=this;this.http.get("cms/print_order?order_num="+t).then((function(t){e.$message({type:"success",message:"打印中..."}),setTimeout((function(){e.$message({type:"success",message:"打印成功"})}),4e3)}))},jump_page:function(t){var e=this,a=(t-1)*e.size,s=t*e.size;console.log(a,s),this.show_list=this.all.slice(a,s)},send:function(t){var e=this,a=this;this.$confirm("确认配送？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.get("order/admin/edit_courier?id="+t).then((function(t){e.$message({type:"success",message:"商品正在配送中"}),a.get_all_order()}))}))},zf:function(t){var e=this,a=this;this.$confirm("确认修改支付？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.get("order/admin/edit_pay?id="+t).then((function(t){e.$message({type:"success",message:"修改支付状态"}),a.get_all_order()}))}))},qrysd:function(t){var e=this;this.$confirm("确认已配送到收货地址？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.http.put_show("order/user/receive?id="+t).then((function(t){e.$message({type:"success",message:"确认收货成功"}),e.get_all_order()}))}))},get_all_order:function(){var t=this;r["a"].get_all_order().then((function(e){t.all=e.data,t.show_list=e.data.slice(0,t.size),t.total=e.data.length}))},del:function(t){var e=this,a=this;this.$confirm("确定删除该订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].del_order(t).then((function(t){e.$message({type:"success",message:"删除成功!"}),a.get_all_order()}))}))},search:function(){var t=this,e=this.form;-1==e.playstate&&(e.playstate=""),l.searchOrder(e).then((function(e){t.show_list=[],t.show_list=e.data}))}}},d=u,p=(a("e106"),a("5d22")),_=Object(p["a"])(d,s,n,!1,null,null,null);e["default"]=_.exports},e106:function(t,e,a){"use strict";a("396f")},f9ff:function(t,e,a){"use strict";var s=a("981f");function n(){var t="order/admin/get_order";return s["a"].post(t).then((function(t){return t}))}function r(t){var e="order/admin/get_order_one";return s["a"].post(e,{id:t}).then((function(t){return t}))}function i(){var t="rate/admin/get_all_rate";return s["a"].get(t).then((function(t){return t}))}function o(t){var e="rate/admin/del_rate";return s["a"].put_show(e,{id:t}).then((function(t){return t}))}function l(t){var e="order/admin/del_order?id=";return s["a"].put_show(e+t).then((function(t){return t}))}e["a"]={get_all_order:n,get_one_order:r,get_all_evaluate:i,del_evaluate:o,del_order:l}}}]);