(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98b2b6ca"],{3381:function(t,e,n){},"3f66":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"adddiscount"},[n("el-container",[n("el-aside",{staticClass:"not-print bg-white erbian",attrs:{width:"160px"}},[n("Nav",{attrs:{ac:"4"}})],1),n("el-main",{staticClass:"main"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v("应用")]),n("el-breadcrumb-item",[t._v("满减活动")])],1),n("div",{staticClass:"H10"}),n("div",{staticClass:"add"},[n("div",{staticClass:"add_btn"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.jumpback}},[t._v("返回")])],1),n("div",{staticClass:"xiao"},[t._v("活动信息")]),n("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"活动名称"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"满多少"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":""},model:{value:t.form.full,callback:function(e){t.$set(t.form,"full",e)},expression:"form.full"}})],1),n("el-form-item",{attrs:{label:"减多少"}},[n("el-input",{staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":""},model:{value:t.form.reduce,callback:function(e){t.$set(t.form,"reduce",e)},expression:"form.reduce"}})],1),n("el-form-item",{attrs:{label:"生效时间"}},[n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}}),t._v("\n\t\t\t\t\t\t 至 \n\t\t\t\t\t\t"),n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1)],1),n("div",{staticClass:"xiao"},[t._v("选择活动商品")]),n("el-tabs",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"border-card"},model:{value:t.active_name,callback:function(e){t.active_name=e},expression:"active_name"}},[n("el-tab-pane",{attrs:{label:"第一步：选择商品",name:"one"}},[n("div",{staticClass:"choose"},[n("div",{staticClass:"search"},[n("el-select",{attrs:{placeholder:"所有分组"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("el-option",{attrs:{label:"一",value:"shanghai"}}),n("el-option",{attrs:{label:"二",value:"beijing"}})],1),t._v(" \n\t\t\t\t\t\t\t\t"),n("el-button",{attrs:{type:"primary"}},[t._v("搜索")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-class-name":t.tableRowClassName}},[n("el-table-column",{attrs:{prop:"",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"pro"},[n("div",{staticClass:"pro_02"},[n("img",{attrs:{src:t.getimg+e.row.img_id}})]),n("div",{staticClass:"pro_03"},[n("div",{staticClass:"pro_03_1"},[t._v(t._s(e.row.goods_name))]),n("div",{staticClass:"pro_03_2"},[t._v("¥"+t._s(e.row.price))])])])]}}])}),n("el-table-column",{attrs:{prop:"stock",label:"库存"}}),n("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_discount?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.add_discout(e.row.goods_id,e.$index,e.row)}}},[t._v("参加满减")]):t._e(),2==e.row.is_discount?n("el-button",{attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(n){return t.del(e.$index)}},slot:"reference"},[t._v("取消参加")]):t._e()]}}])})],1)],1),n("div",{staticClass:"quan"},[n("div",{staticClass:"quan_r"},[t._v("共5条，每页30条")])])]),1==t.is_two?n("el-tab-pane",{attrs:{label:"第二步：设置满减",name:"two"}},[n("div",{staticClass:"choose"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.discount_list,"row-class-name":t.tableRowClassName}},[n("el-table-column",{attrs:{prop:"",label:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"pro"},[n("div",{staticClass:"pro_02"},[n("img",{attrs:{src:t.getimg+e.row.img_id}})]),n("div",{staticClass:"pro_03"},[n("div",{staticClass:"pro_03_1"},[t._v(t._s(e.row.goods_name))]),n("div",{staticClass:"pro_03_2"},[t._v("¥"+t._s(e.row.price))])])])]}}],null,!1,592671913)}),n("el-table-column",{attrs:{prop:"",label:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t减价：满"+t._s(t.form.full)+"减"+t._s(t.form.reduce)+"元\n\t\t\t\t\t\t\t\t\t")]}}],null,!1,3765964612)}),n("el-table-column",{attrs:{prop:"operation",label:"",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.del_disgoods(e.$index)}}},[t._v("取消")])]}}],null,!1,3443465662)})],1)],1),n("div",{staticClass:"quan"},[n("div",{staticClass:"quan_r"},[t._v("共5条，每页30条")])])]):t._e(),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.jump_page}})],1),n("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.jumpback}},[t._v("取 消")]),0==t.is_two?n("el-button",{on:{click:t.next}},[t._v("下一步")]):t._e(),1==t.is_two?n("el-button",{on:{click:t.back}},[t._v("上一步")]):t._e(),1==t.is_two?n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")]):t._e()],1)],1)],1)],1)],1)},i=[],a=(n("a450"),n("2763"),n("a49b"),n("6691")),s=n("d22d"),r=n("990f"),l={data:function(){return{active_name:"two",is_two:1,discount_list:[],getimg:this.$getimg,choose:!0,tableData:[],tab_nav:!1,dialogVisibleadd:!1,dialogFormVisible:!1,oid:0,form:{goods_json:[]},list:[],all:"",size:10,total:"",value:""}},watch:{active_name:function(){"one"==this.active_name&&(this.is_two=0),"two"==this.active_name&&(this.is_two=1)}},components:{Nav:a["a"]},mounted:function(){console.log(this.$route.query.id),this.get_one_mj(this.$route.query.id),this._load()},methods:{_load:function(){var t=this;r["a"].get_all_no_mj_pro().then((function(e){for(var n in e.data){var o=e.data[n];o.is_discount=1}t.all=e.data,t.total=e.data.length,t.tableData=e.data.slice(0,t.size),console.log(t.tableData)}))},jump_page:function(t){console.log(t);var e=this,n=(t-1)*e.size,o=t*e.size;console.log(n,o),this.tableData=this.all.slice(n,o)},add_discout:function(t,e,n){var o={goods_id:t,discount_type:1,reduce_price:"",discount_price:0},i={img_id:n.img_id,goods_id:n.goods_id,goods_name:n.goods_name,price:n.price,goods:{goods_name:n.goods_name,price:n.price},reduce_price:"",discount_type:1,discount_price:0};this.tableData[e].is_discount=2,this.form.goods_json.push(o),this.discount_list.push(i),console.log(this.form),console.log(this.discount_list)},del:function(t){this.tableData[t].is_discount=1,this.form.goods_json.splice(t,1),this.discount_list.splice(t,1),console.log(this.form)},del_disgoods:function(t){this.discount_list.splice(t,1)},get_one_mj:function(t){var e=this;s["a"].get_one_mj(t).then((function(t){e.discount_list=t.data.goods;var n=t.data.reduction;e.form={id:n.id,name:n.name,start_time:n.start_time,end_time:n.end_time,full:n.full,reduce:n.reduce,goods_json:[]}}))},next:function(){this.active_name="two",this.is_two=1},back:function(){this.is_two=0,this.active_name="one"},onSubmit:function(){var t=this,e=this,n=[],o={goods_id:"",discount_type:"",reduce_price:"",discount_price:""};for(var i in this.discount_list){var a=this.discount_list[i];o.goods_id=a.goods_id,o.discount_type=a.discount_type,o.reduce_price=a.reduce_price,o.discount_price=a.discount_price,n.push(o.goods_id),o={goods_id:"",discount_type:"",reduce_price:"",discount_price:""}}this.form.goods_json=n,console.log(this.form),this.http.post_show("reduction/admin/edit_reduction",this.form).then((function(n){console.log(n),400==n.status?e.$message({showClose:!0,message:n.msg,type:"success"}):e.$message({showClose:!0,message:"修改成功",type:"success"}),t.jumpback()}))},add_user:function(){this.dialogVisibleadd=!0},edit:function(t,e,n,o,i,a){this.form.id=t,this.form.goods_name=e,this.form.content=n,this.form.img_id=o,this.form.stock=i,this.form.points=a,console.log(this.form)},jumpback:function(){this.$router.push({path:"./discount"})},goods_json:function(){}}},c=l,u=(n("ff47"),n("5d22")),d=Object(u["a"])(c,o,i,!1,null,null,null);e["default"]=d.exports},6691:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("div",{staticClass:"top-title"},[t._v("应用管理")]),n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.act},on:{open:t.handleOpen,close:t.handleClose}},[n("el-menu-item",{attrs:{index:"1"},on:{click:t.jump_to_b}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("优惠券")])]),n("el-menu-item",{attrs:{index:"2"},on:{click:t.jump_to_a}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("满减")])]),n("el-menu-item",{attrs:{index:"3"},on:{click:t.jump_to_ad}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("广告")])]),n("el-menu-item",{attrs:{index:"4"},on:{click:t.jump_article}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("文章")])]),n("el-menu-item",{attrs:{index:"5"},on:{click:t.jump_address}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("地址")])]),n("el-menu-item",{attrs:{index:"6"},on:{click:t.jump_smdc}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("扫码点餐")])]),n("el-menu-item",{attrs:{index:"7"},on:{click:t.jump_serach}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("搜索")])])],1)],1)},i=[],a={data:function(){return{act:""}},props:{ac:String},mounted:function(){console.log(this.ac),this.act=this.ac},methods:{jump_address:function(){this.$router.push({path:"/extend/address"})},jump_Nav:function(){this.$router.push({path:"/extend/Nav"})},jump_serach:function(){this.$router.push({path:"/serach/serach"})},jump_article:function(){this.$router.push({path:"/extend/article"})},jump_to_ad:function(){this.$router.push({path:"/extend/ad"})},jump_to_a:function(){this.$router.push({path:"/extend/discount"})},jump_to_b:function(){this.$router.push({path:"/extend/coupon"})},jump_to_c:function(){this.$router.push({path:"/extend/pt"})},jump_to_d:function(){this.$router.push({path:"/extend/discount"})},jump_smdc:function(){this.$router.push({path:"/extend/smdc"})},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},handleselect:function(t,e){this.act=t,localStorage.setItem("act",t)}}},s=a,r=n("5d22"),l=Object(r["a"])(s,o,i,!1,null,null,null);e["a"]=l.exports},"990f":function(t,e,n){"use strict";var o=n("981f");function i(t){var e="product/copy/get_info";return o["a"].post_show(e,t).then((function(t){return t}))}function a(t){var e="product/admin/add_product";return o["a"].post_show(e,t).then((function(t){return t}))}function s(){var t="product/admin/all_goods_info";return o["a"].get(t).then((function(t){return t}))}function r(t){var e="product/admin/del_product";return o["a"].put_show(e,{id:t}).then((function(t){return t}))}function l(t){var e="product/get_product";return o["a"].get(e+"?id="+t).then((function(t){return t}))}function c(t){var e="product/admin/edit_product ";return o["a"].post_show(e,t).then((function(t){return t}))}function u(){var t="reduction/admin/get_no_goods";return o["a"].get(t).then((function(t){return t}))}function d(t){var e="reduction/admin/add_reduction";return o["a"].post_show(e,t).then((function(t){return t}))}e["a"]={get_pro_buy_web:i,get_all_pro:s,del_pro:r,add_pro:a,get_pro_byID:l,edit_pro:c,get_all_no_mj_pro:u,add_mj:d}},d22d:function(t,e,n){"use strict";var o=n("981f");function i(){var t="coupon/admin/get_coupon";return o["a"].get(t).then((function(t){return t}))}function a(t){var e="coupon/admin/del_coupon";return o["a"].put_show(e,{id:t}).then((function(t){return t}))}function s(t){var e="coupon/admin/add_coupon";return o["a"].post_show(e,t).then((function(t){return t}))}function r(){var t="banner/admin/banner_all_item";return o["a"].get(t).then((function(t){return t}))}function l(t){console.log(t);var e="banner/admin/add_banner";return o["a"].post_show(e,t).then((function(t){return t}))}function c(t){var e="banner/admin/del_banner";return o["a"].put_show(e,t).then((function(t){return t}))}function u(){var t="reduction/admin/get_all_reduction";return o["a"].get(t).then((function(t){return t}))}function d(){var t="";return o["a"].get(t).then((function(t){return t}))}function _(t){var e="";return o["a"].post_show(e,t).then((function(t){return t}))}function p(t){var e="reduction/admin/del_reduction?id=";return o["a"].put_show(e,{id:t}).then((function(t){return t}))}function m(t){var e="reduction/get_one_reduction";return o["a"].get(e+"?id="+t).then((function(t){return t}))}function f(){var t="index/get_address";return o["a"].get(t).then((function(t){return t}))}function h(t){var e="cms/admin/add_region";return o["a"].post_show(e,t).then((function(t){return t}))}function v(t){var e="/cms/admin/del_region";return o["a"].Del(e+"?id="+t).then((function(t){return t}))}function g(t){var e="/cms/admin/edit_region";return o["a"].post_show(e,t).then((function(t){return t}))}e["a"]={edit_address:g,del_address:v,add_address:h,get_all_address:f,get_one_mj:m,get_all_coupon:i,del_coupon:a,add_coupon:s,get_all_ad:r,add_ad:l,del_ad:c,get_all_mj:u,get_all_no_mj:d,del_mj:p,add_mj:_}},ff47:function(t,e,n){"use strict";n("3381")}}]);